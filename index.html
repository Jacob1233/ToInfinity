<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>To Infinity</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="shortcut icon" type="image/png" href="https://i.imgur.com/f77inZJ.png"/>
    
    <style>
        html {
            height: 100%;
            width: 100%;
        }
        
        body {
            padding: 0;
            min-width: 1280px;
            min-height: 720px;
            background-color: #333;
            height: 100%;
        }
        
        iframe {
            margin-top: 52px;
            padding: 0;
            min-width: 1280px;
            width: 100%;
            min-height: 660px;
            height: 93%;
        }
    </style>
</head>

<body onload="init()">

    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="#">
                    To Infinity
                </a>
            </div>
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-left">
                    <li><a href="#" id="next">Next</a></li>
                </ul>
                <div class="navbar-form navbar-left">
                    <div class="form-group">
                        <input type="text" id="name" class="form-control" placeholder="Board Name">
                    </div>
                    <button id="save" class="btn btn-default">Save</button>
                    <button id="jump" class="btn btn-default">Jump</button>
                </div>

                <ul class="nav navbar-nav navbar-right">
                    <li><a href="#" id="clear">Clear</a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Boards <span class="caret"></span></a>
                        <ul class="dropdown-menu boards">
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <iframe src="https://8ch.net/random.php" frameborder="0"></iframe>


    <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="https://cdn.rawgit.com/js-cookie/js-cookie/master/src/js.cookie.js"></script>
    <script>
        function init() {

            if (Cookies.get('confirm') == null) {
                var conf = confirm("By using this website, you agree to the use of cookies to store the names of your saved boards. \nThis website is a faster way to find random boards on 8chan. \nClick 'Next' to go to the next board. \nType in a board name and click 'Save' to save that board for 24 hours. \nType in a board name and click 'Jump' to jump to that specific board. \nClick 'Clear' to clear the cookie and delete all saved boards. \nYou can also tap the Tilda or Grave Accent key to move to the next board. \nNote: After clicking on the 8chan page, you will have to click next for the tilda key to work again.");

                if (conf == false) {
                    alert("To avoid storing cookies, Please exit the site now");
                }
            }

            Cookies.set('confirm', 'true', {
                expires: 365
            });

            if (Cookies.get('saved_boards') == null) {
                var array = new Array();
                Cookies.set('saved_boards', array, {
                    expires: 1
                });
            } else {
                var saves = Cookies.getJSON('saved_boards');
                for (var i = 0; i < saves.length; i++) {
                    $(".boards").append(`<li>${saves[i]}</li>`);
                }
            }
        }
        
        $('#save').click(save);
        
        $('#jump').click(jump);

        function save() {
            var name = $("#name").val();
            var saves = Cookies.getJSON('saved_boards');
            saves.push(name);
            Cookies.set('saved_boards', saves, {
                expires: 1
            });
            $("#name").val("");
            $(".boards").html(" ");
            for (var i = 0; i < saves.length; i++) {
                $(".boards").append(`<li>${saves[i]}</li>`);
            }
        }

        function jump() {
            var v = $('#name').val();
            var str = `https://8ch.net/${v}/`;
            $("iframe").attr('src', str);
            $('#name').val("");
        }

        $("#next").click(function () {

            $("iframe").attr('src', 'https://8ch.net/random.php');
        });

        $("#clear").click(function () {
            Cookies.remove('saved_boards');
            location.reload();
        });
    </script>
    <script>
        $(document).keydown(function (event) {
            var keycode = (event.keyCode ? event.keyCode : event.which);
            if (keycode == 192) {
                $("iframe").attr('src', 'https://8ch.net/random.php');
            }
        });
    </script>
</body>

</html>
